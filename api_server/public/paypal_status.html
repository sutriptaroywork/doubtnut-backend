<!DOCTYPE html>
<html lang="en" ng-app>
<head>
    <title>PayPal</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="url" http-equiv="Refresh" content="5; url=com.doubtnut.android.na.payment:/status?id=123&msg=txt">

    <style>

    </style>

</head>
<body>
<div class="container">
    <div>
        <h3>Processing Transaction...</h3>
        <p>Please wait while we redirect you to Doubtnut</p>
        <input type="button" class="btn btn-primary" onclick="RedirectSuccess();" name="ok" id="successButton" value="Goto App"  />
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script>
    function qs(key) {
        key = key.replace(/[*+?^$.\[\]{}()|\\\/]/g, "\\$&"); // escape RegEx meta chars
        var match = location.search.match(new RegExp("[?&]"+key+"=([^&]+)(&|$)"));
        console.log("match", match);
        return match && decodeURIComponent(match[1].replace(/\+/g, " "));
    }

    $( document ).ready(function() {
        document.querySelector('meta[name="url"]').setAttribute("url", "com.doubtnut.android.na.payment:/status?id="+qs("id"));
        // throw new Error("Something went badly wrong!");

        setTimeout(function() {
            $("#successButton").trigger("click");
        }, 1000);
    });


    function RedirectSuccess(){

        var isWebview = qs("webview");
        var id = qs("id");
        if(isWebview != undefined && isWebview == "true") {
            window.location = "com.doubtnut.android.na.payment:/status?id="+id;
        }
        else {
            window.location = "com.doubtnut.android.na.payment:/status?id="+id;
            document.querySelector('meta[name="url"]').setAttribute("url", "com.doubtnut.android.na.payment:/status?id="+id);
        }
    }

</script>
</body>
</html>























